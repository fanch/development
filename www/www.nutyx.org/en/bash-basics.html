<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
     "http://www.w3.org/TR/html4/strict.dtd">
<HTML>
   
<!-- Mirrored from www.nutyx.org/en/bash-basics by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 02 Jul 2017 10:31:17 GMT -->
<HEAD>
      <TITLE>NuTyX GNU/Linux</TITLE>
      <META charset="utf-8" />
      <LINK rel="shortcut icon" href="../favicon.html">
 <style type="text/css">
 body{
   text-align: left;
   color: #444;
   background: #eee url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAMAAAC6sdbXAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAZQTFRF3d3d////riJKgAAAAAJ0Uk5T/wDltzBKAAAAFUlEQVR42mJgBAEGGMmAxAYCgAADAAGGABmnk/7aAAAAAElFTkSuQmCC); 
   font: 14px;
}
header {
   float: left;
   padding-top: 6px;
   padding-left: 2%;
   margin-right: 2%;
   background-color: #606060;
}
nav { padding-top: 1px; }
/* horizontally center ul element */
nav ul { text-align:center; }
nav li {
    /* make list elements fall inline as block elements */
    position: relative;
    display: inline-block;
    /* next two lines only for display purposes */
    text-align: center;
    border:1px solid black;
}
nav li a {
    font-size:12px;
    text-decoration: none;
    float:left;
    padding:10px;
    background-color: #333333;
    color:#ffffff;
    border-bottom:1px;
    border-bottom-color:#000000;
    border-bottom-style:solid;
}
nav li a:hover {
    background-color:#9B1C26;
    border-bottom-color:#000000;
    border-bottom-style:solid;
}
img { border: 0; }
nav.img { border: 0; }
h1 { text-decoration: underline; }

p1 {
    display: inline-block;
    vertical-align: top;
    text-align: left;
    color:#585858;
    font-size:1em;
}
pre {
   padding: 0.5em 1em;
   margin: 1em 0em 1em 2em;
   font-weight:bold;
   color: black;
   font-family: monospace;
   background-color: #D0D0D0;
}
td { padding: 0.5em 0.5em 0.5em 0.5em; }
tr.header { color: white; background-color: #606060; }
tr.odd { background-color: #D0D0D0; }
.sidebar { background-color: #E0E0E0; }
pre.command { border-left: 0.2em solid #C70000; }
pre.command_user { border-left: 0.2em solid #00C700; }
pre.output { font-weight:normal; }
div.important {
   margin: 1em 2em 1em 2em;
   font-size: 1.2em;
   color:#883333;
   padding: 0.5em 0.5em 0.5em 0.5em;
   border: 2px solid #866;
}
div.note {
   margin: 1em 2em 1em 0em;
   font-size: 1em;
   color:#333388;
   border: 2px solid #dbddec;
   padding: 0.5em 0.5em 0.5em 0.5em;
}
div.toc {
   margin: 0em 0em 0em 0em;
   font-size: 0.9em;
   border: 1px solid #999999;
   padding: 0em 2em 0em 1em;
   width: -moz-max-content;
   background-color: #e9e9ef;
}
div.important img { padding: 0.4em; }
div.note img { padding: 0em 0.4em; }
div.pied_page { text-align: center; }
a { color: #F64825; }
#foot {
    text-align: center;
    text-decoration-color: #000000;
    font-size: 10px;
}
/* Last edited info */
p.updated {
    text-align: left;
    font-size: small;
    font-weight: bold;
    font-style: italic;
}
a:link {
    color: #703030;
    text-decoration: none;
}
a:visited {
    color: #0b0080;
}
a:hover {
    color: #403030;
    text-decoration: underline;
}
table {
    width: 100%;
}
td.menu {
    font: courrier;
    background-color: #959595;
    text-decoration: none;
    vertical-align:middle;
    text-align:center;
    height:60px;
}
td.menu:hover {
    text-decoration: none;
    background-color: #AAAAAA;
    text-transform: uppercase;
}
td.menu a:link {
    font-weight:bold;
    color: black;
    text-decoration: none;
    font-family: arial;
}
td.menu a:visited {
    font-weight:bold;
    color: black;
    text-decoration: none;
    font-family: arial;
}
td.menu a:hover {
    color: black;
    text-decoration: none;
    font-family: arial;
}
 @media print { header, footer {display:none } }
 </style>
</head>
<body>
    <table>
     <tr>
      <td>
       <a href=".html"><img id="logo" src="../graphics/logo_nutyx_120.png" alt="logo nutyx" /></a>
      </td>
      <td>
       <table>
        <tr>
            <td class="menu"><br><a href="news.html">News</a><br><br>
            <td class="menu"><br><a href="information.html">Information</a><br><br>
            <td class="menu"><br><a href="documentation.html">Documentation</a><br><br>
            <td class="menu"><br><a href="installation.html">Installation</a><br><br>
            <td class="menu"><br><a href="packages.html">Packages</a><br><br>
            <td class="menu"><br><a href="faq.html">FAQ</a><br><br>
        </tr>
        <tr>
            <td class="menu"><br><a href="http://downloads.nutyx.org/?C=M;O=D">Downloads</a><br><br>
            <td class="menu"><br><a href="http://forums.nutyx.org/index.php?action=recent">Forum</a><br><br>
            <td class="menu"><br><a href="http://github.com/NuTyX">Code</a><br><br>
            <td class="menu"><br><a href="screenshots.html">Screenshots</a><br><br>
            <td class="menu"><br><a href="wallpapers.html">Wallpapers</a><br><br>
            <td class="menu"><br><a href="../fr/index.html" title="Acceuil"> <img src="../graphics/fr.gif" alt="Accueil" height="12" width="35"></a><br><br>
        </tr>
       </table>
      </td>
     </tr>
    </table>
   <hr>
<table border="0" cellpadding="15" cellspacing="10" width="100%">
 <tr valign="top">
  <td class="sidebar" width="20%">
   <h4>Forum</h4>
    <div>
<p class="updated">Sun Jun 25 16:07:12 2017 UTC</p><div style="text-transform: uppercase;">General:</div><b>News</b><br><i>tnut</i><br><img src="../graphics/xx.gif" alt="" /> <a href="http://forums.nutyx.org/index.php?topic=197.msg614#msg614">New ISO  with LIVE mode available</a><br><br>
<hr align="center" style="width: 50%;">
<p class="updated">Mon Jun 12 19:48:17 2017 UTC</p><div style="text-transform: uppercase;">INSTALL:</div><b>From GIT</b><br><i>tnut</i><br><img src="../graphics/xx.gif" alt="" /> <a href="http://forums.nutyx.org/index.php?topic=196.msg613#msg613">Re: Error in 2nd pass of &quot;build your own&quot;</a><br><br>
<hr align="center" style="width: 50%;">
<p class="updated">Sun May 28 22:40:06 2017 UTC</p><div style="text-transform: uppercase;">INSTALL:</div><b>From GIT</b><br><i>myrddin</i><br><img src="../graphics/thumbup.gif" alt="" /> <a href="http://forums.nutyx.org/index.php?topic=196.msg612#msg612">Re: Error in 2nd pass of &quot;build your own&quot;</a><br><br>
<hr align="center" style="width: 50%;">
<p class="updated">Sun May 28 17:59:21 2017 UTC</p><div style="text-transform: uppercase;">INSTALL:</div><b>From GIT</b><br><i>tnut</i><br><img src="../graphics/lamp.gif" alt="" /> <a href="http://forums.nutyx.org/index.php?topic=196.msg611#msg611">Re: Error in 2nd pass of &quot;build your own&quot;</a><br><br>
<hr align="center" style="width: 50%;">
<p class="updated">Fri May 26 07:30:33 2017 UTC</p><div style="text-transform: uppercase;">INSTALL:</div><b>From GIT</b><br><i>tnut</i><br><img src="../graphics/xx.gif" alt="" /> <a href="http://forums.nutyx.org/index.php?topic=196.msg610#msg610">Re: Error in 2nd pass of &quot;build your own&quot;</a><br><br>
<hr align="center" style="width: 50%;">
<p class="updated">Fri May 26 03:01:17 2017 UTC</p><div style="text-transform: uppercase;">INSTALL:</div><b>From GIT</b><br><i>myrddin</i><br><img src="../graphics/xx.gif" alt="" /> <a href="http://forums.nutyx.org/index.php?topic=196.msg609#msg609">Error in 2nd pass of &quot;build your own&quot;</a><br><br>
<hr align="center" style="width: 50%;">
<p class="updated">Sun May 21 19:31:21 2017 UTC</p><div style="text-transform: uppercase;">Off-Topic:</div><b>Let's talk about you</b><br><i>tnut</i><br><img src="../graphics/xx.gif" alt="" /> <a href="http://forums.nutyx.org/index.php?topic=195.msg608#msg608">Re: New nuty user </a><br><br>
<hr align="center" style="width: 50%;">
<p class="updated">Sun May 21 16:52:07 2017 UTC</p><div style="text-transform: uppercase;">Off-Topic:</div><b>Let's talk about you</b><br><i>john</i><br><img src="../graphics/smiley.gif" alt="" /> <a href="http://forums.nutyx.org/index.php?topic=195.msg607#msg607">New nuty user </a><br><br>
<hr align="center" style="width: 50%;">
<p class="updated">Thu May 18 12:19:48 2017 UTC</p><div style="text-transform: uppercase;">General:</div><b>Cards: The Package Manager</b><br><i>tnut</i><br><img src="../graphics/wink.gif" alt="" /> <a href="http://forums.nutyx.org/index.php?topic=194.msg606#msg606">Re: where are CLI commands such as lspci</a><br><br>
<hr align="center" style="width: 50%;">
<p class="updated">Thu May 18 11:48:07 2017 UTC</p><div style="text-transform: uppercase;">General:</div><b>Cards: The Package Manager</b><br><i>myrddin</i><br><img src="../graphics/xx.gif" alt="" /> <a href="http://forums.nutyx.org/index.php?topic=194.msg605#msg605">Re: where are CLI commands such as lspci</a><br><br>
    </div>
<hr>  <td valign="top" align="left" width="100%">
   <div>
  <form method="get" action="https://www.nutyx.org/en/.">
     <fieldset>
          <label for="search-field">Search ...</label>
          <input id="search-field" type="text" name="search" size="18" maxlength="200" />
     </fieldset>
  </form>
   </div>
    <p class="updated"> Sat Apr  8 17:00:55 2017 UTC</p>
  <h1>What do you need to know to contribute?</h1>
   <p>
   You don't need to be an experienced programmer to contribute to this project.
   A rudimentary knowledge of the bash scripting language is good enough.
   If you have no knowledge of bash, this article will explain the basic principles
   for creating a recipe without going crazy.
   <p>
    The bash langage is used to edit a recipe and to generate a package from it.
    The fact that bash is a  programming language might seem frightening to some potential users, who might think:
    "I don't know how to program". There are three reasons why you should not feel scared:
   <ul>
    <li>
     Bash is an interpreted language, not a compiled one,
     which means that the commands you type in at the keyboard (or read in from a file)
     are directly executed without the need to construct a complete program.
    <li>
     The syntax of bash is very simple and intuitive.
    <li>
     Finally the recipe and the creation of the binary package from
     it seldom use the more complex options of the bash language.
   </ul>
   <p>
    So let's start <img src="../graphics/smiley-wink.gif" alt="Wink" title="Wink" /> our little course on the bash programming 
   <p>
    This article will explain some basic features of the language that are good to knows to comprehend the syntax of a recipe:
<div class="toc">
 <h2>
Contents
</h2>
  <ul style="list-style-type: none; padding: 0;">
<li><a href="#1">Declaring a variable</a>
<li><a href="#2">Using a variable</a>
<li><a href="#3">Using predefined variables in a recipe</a>
<li><a href="#4">Declaring an array</a>
<li><a href="#5">Declaring a function</a>
<li><a href="#6">Conclusion</a>
</ul>
</div>
<a name="1"></a>  <h2>Declaring a variable</h2>
   <p>
    All you need to do to declare a variable is this:
    <pre>name=mypackage</pre>
   <p>
    You declare the variable <strong><em>name</em></strong> by using the equals sign,
    with the name of the variable to the left of the sign and the value <strong><em>mypackage</em></strong> to the right.
<a name="2"></a>  <h2>Using a variable</h2>
   <p>
    So you know how to declare a variable; that's very nice, but how do you get at its content in order to use it?
   <p>
    To extract the content of a variable you use the dollar sign ($) with braces if required. Both forms are valid:
    <pre>${name}<br />$name</pre>
   <p>
    It is better to use the first form since otherwise, if the variable name contains an underscore,
    it will not be interpretated correctly by bash:
    <pre>name=xorg-libx11<br />_name=libX11<br />$name        # this works
${_name}     # so does this
$_name       # wrongly interpreted and won't work</pre>
   <p>
    In order to see the result of this command, I suggest you create a little file containing this code.
    You can call the file DeclareVar
    <pre>name=kernel
echo "The variable name contains the value: ${name}"</pre>
   <p>
    Now give the command:
    <pre class="command" ><kbd>sh DeclareVar</kbd></pre>
    <pre class="output" >The variable name contains the value: kernel</pre>
<a name="3"></a>  <h2>Using predefined variables in a recipe</h2>
   <p>
    When you construct a recipe, you will have access to a whole series of predefined variables.
    <div>
     <strong>PKG</strong>: Certainly the most often used, this defines the destination folder for the compiled files.
     This folder then contains the file structure before it is packaged up
    </div>
    <div>
     <strong>SRC</strong>: This variable defines the folder where all the source files are extracted.
      It is therefore very useful when you need to loop through subfolders and then return at the end of the loop to where you started.
     This is also the variable which defines the current working directory for the main function of the recipe.
    </div>
    <div>
     <strong>MAKEFLAGS</strong>: This variable is not used so often.
     It is initialized in the pkgmk configuration file. Its use is detailed in another article.
     For the time being, all you need to know is that it allows you to specify the extent of parallel compilation.
    </div>
    <div>
     There are others, but personally I see no need for them when constructing recipes.
    </div>
<a name="4"></a>  <h2>Declaring an array</h2>
   <p>
    To declare an array of strings (or anything else), you add parentheses:
    <pre class="output">source=(firefox.png firefox.desktop)</pre>
   <p>
    This array <strong>source</strong> contains 2 variables: firefox.png and firefox.desktop.
    The source array from the recipe for the kernel provides a particularly good example:
    <pre>source=(http://www.kernel.org/pub/linux/kernel/v3.0/linux-${_BaseVersion}.tar.bz2 \
	config_64 config \
	http://www.kernel.org/pub/linux/kernel/v3.0/patch-$version.bz2 \
	http://downloads.nutyx.org/files/patchs/$name/broadcom-wl-kernel3-01.patch \
	http://downloads.nutyx.org/files/patchs/$name/3.2.8.patch \
	http://downloads.nutyx.org/files/patchs/$name/3.4.patch \
	http://downloads.nutyx.org/files/patchs/$name/makefile_compat.patch \
	http://downloads.nutyx.org/files/patchs/$name/bc_wl_abiupdate.patch)</pre>
   <p>
    Each line is a variable in its own right and can be accessed using the syntax:
    <pre>echo "$(source[1])"</pre>
   <p>
    You will notice that each variable can in turn contain other variables provided that they have been defined earlier.
<a name="5"></a>  <h2>Declaring a function</h2>
   <p>
    To declare a function is almost as simple.
    You use parentheses when giving the name of the function; the function code is always enclosed in braces { etc }.
    A little example:
    <pre class="output">build() {<br />cd $name-$version<br />./configure --prefix=/usr<br />make<br />make DESTDIR=$PKG install<br />}</pre>
   <p>
    As you can see, it's very pretty and also contains a minimal recipe (without the variable declarations).
    Here you can see  the essential use of the <b>PKG</b> variable.
<a name="6"></a>   <h2>Conclusion</h2>
    <p>
     We are now ready to learn what's <a href="recept.html">a recept or a port</a>.
<hr>
    <footer >
     <p id="foot"> Powered by cards 2.2.2.2     &copy; 2007 - 2017 <a href=".html">NuTyX</a>.<br><br>
Hosted by <a href="http://tuxfamily.org/"><img src="../graphics/logo_tuxfamily_50.png"/></a><br><br>
     <a href="http://www.wtfpl.net/">
     <img src="http://www.wtfpl.net/wp-content/uploads/2012/12/wtfpl-badge-4.png"
     width="80" height="15" alt="WTFPL" /></a> 
     <a href="http://www.anybrowser.org/campaign/">
       <img src="../graphics/abblue.gif" width="80" height="15"
       alt="anybrowser"></a>
    </footer>
   </tr>
  </table>
 </body>

<!-- Mirrored from www.nutyx.org/en/bash-basics by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 02 Jul 2017 10:31:17 GMT -->
</html>
