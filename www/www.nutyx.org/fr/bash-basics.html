<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
     "http://www.w3.org/TR/html4/strict.dtd">
<HTML>
   
<!-- Mirrored from www.nutyx.org/fr/bash-basics by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 02 Jul 2017 10:32:54 GMT -->
<HEAD>
      <TITLE>NuTyX GNU/Linux</TITLE>
      <META charset="utf-8" />
      <LINK rel="shortcut icon" href="../favicon.html">
 <style type="text/css">
 body{
   text-align: left;
   color: #444;
   background: #eee url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAMAAAC6sdbXAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAZQTFRF3d3d////riJKgAAAAAJ0Uk5T/wDltzBKAAAAFUlEQVR42mJgBAEGGMmAxAYCgAADAAGGABmnk/7aAAAAAElFTkSuQmCC); 
   font: 14px;
}
header {
   float: left;
   padding-top: 6px;
   padding-left: 2%;
   margin-right: 2%;
   background-color: #606060;
}
nav { padding-top: 1px; }
/* horizontally center ul element */
nav ul { text-align:center; }
nav li {
    /* make list elements fall inline as block elements */
    position: relative;
    display: inline-block;
    /* next two lines only for display purposes */
    text-align: center;
    border:1px solid black;
}
nav li a {
    font-size:12px;
    text-decoration: none;
    float:left;
    padding:10px;
    background-color: #333333;
    color:#ffffff;
    border-bottom:1px;
    border-bottom-color:#000000;
    border-bottom-style:solid;
}
nav li a:hover {
    background-color:#9B1C26;
    border-bottom-color:#000000;
    border-bottom-style:solid;
}
img { border: 0; }
nav.img { border: 0; }
h1 { text-decoration: underline; }

p1 {
    display: inline-block;
    vertical-align: top;
    text-align: left;
    color:#585858;
    font-size:1em;
}
pre {
   padding: 0.5em 1em;
   margin: 1em 0em 1em 2em;
   font-weight:bold;
   color: black;
   font-family: monospace;
   background-color: #D0D0D0;
}
td { padding: 0.5em 0.5em 0.5em 0.5em; }
tr.header { color: white; background-color: #606060; }
tr.odd { background-color: #D0D0D0; }
.sidebar { background-color: #E0E0E0; }
pre.command { border-left: 0.2em solid #C70000; }
pre.command_user { border-left: 0.2em solid #00C700; }
pre.output { font-weight:normal; }
div.important {
   margin: 1em 2em 1em 2em;
   font-size: 1.2em;
   color:#883333;
   padding: 0.5em 0.5em 0.5em 0.5em;
   border: 2px solid #866;
}
div.note {
   margin: 1em 2em 1em 0em;
   font-size: 1em;
   color:#333388;
   border: 2px solid #dbddec;
   padding: 0.5em 0.5em 0.5em 0.5em;
}
div.toc {
   margin: 0em 0em 0em 0em;
   font-size: 0.9em;
   border: 1px solid #999999;
   padding: 0em 2em 0em 1em;
   width: -moz-max-content;
   background-color: #e9e9ef;
}
div.important img { padding: 0.4em; }
div.note img { padding: 0em 0.4em; }
div.pied_page { text-align: center; }
a { color: #F64825; }
#foot {
    text-align: center;
    text-decoration-color: #000000;
    font-size: 10px;
}
/* Last edited info */
p.updated {
    text-align: left;
    font-size: small;
    font-weight: bold;
    font-style: italic;
}
a:link {
    color: #703030;
    text-decoration: none;
}
a:visited {
    color: #0b0080;
}
a:hover {
    color: #403030;
    text-decoration: underline;
}
table {
    width: 100%;
}
td.menu {
    font: courrier;
    background-color: #959595;
    text-decoration: none;
    vertical-align:middle;
    text-align:center;
    height:60px;
}
td.menu:hover {
    text-decoration: none;
    background-color: #AAAAAA;
    text-transform: uppercase;
}
td.menu a:link {
    font-weight:bold;
    color: black;
    text-decoration: none;
    font-family: arial;
}
td.menu a:visited {
    font-weight:bold;
    color: black;
    text-decoration: none;
    font-family: arial;
}
td.menu a:hover {
    color: black;
    text-decoration: none;
    font-family: arial;
}
 @media print { header, footer {display:none } }
 </style>
</head>
<body>
    <table>
     <tr>
      <td>
       <a href=".html"><img id="logo" src="../graphics/logo_nutyx_120.png" alt="logo nutyx" /></a>
      </td>
      <td>
       <table class="sidebar" >
        <tr>
            <td class="menu"><br><a href="news.html">Nouvelles</a><br><br>
            <td class="menu"><br><a href="information.html">Information</a><br><br>
            <td class="menu"><br><a href="documentation.html">Documentation</a><br><br>
            <td class="menu"><br><a href="installation.html">Installation</a><br><br>
            <td class="menu"><br><a href="packages.html">Paquets</a><br><br>
            <td class="menu"><br><a href="faq.html">FAQ</a><br><br>
        </tr>
        <tr>
            <td class="menu"><br><a href="http://downloads.nutyx.org/?C=M;O=D">Téléchargements</a><br><br>
            <td class="menu"><br><a href="http://forum.nutyx.org/index.php?action=recent">Forum</a><br><br>
            <td class="menu"><br><a href="http://github.com/NuTyX">Code</a><br><br>
            <td class="menu"><br><a href="screenshots.html">Captures d'écrans</a><br><br>
            <td class="menu"><br><a href="wallpapers.html">Fonds d'écrans</a><br><br>
            <td class="menu"><br><a href="../en/index.html" title="Home"> <img src="../graphics/gb.gif" alt="Home" height="12" width="35"></a><br><br>
        </tr>
       </table>
      </td>
     </tr>
    </table>
   <hr>
<table border="0" cellpadding="15" cellspacing="10" width="100%">
 <tr valign="top">
  <td class="sidebar" width="20%">
   <h4>Forum</h4>
    <div>
<p class="updated">Sat Jul  1 17:50:49 2017 UTC</p><div style="text-transform: uppercase;">INSTALLER:</div><b>Un paquet</b><br><i>tnut</i><br><img src="../graphics/xx.gif" alt="" /> <a href="http://forum.nutyx.org/index.php?topic=366.msg1880#msg1880">Re : Recette uClibc-ng (gelée)</a><br><br>
<hr align="center" style="width: 50%;">
<p class="updated">Fri Jun 30 21:42:58 2017 UTC</p><div style="text-transform: uppercase;">INSTALLER:</div><b>Un paquet</b><br><i>Modelor</i><br><img src="../graphics/xx.gif" alt="" /> <a href="http://forum.nutyx.org/index.php?topic=378.msg1879#msg1879">Recette musl-libc</a><br><br>
<hr align="center" style="width: 50%;">
<p class="updated">Fri Jun 30 20:51:32 2017 UTC</p><div style="text-transform: uppercase;">INSTALLER:</div><b>Un paquet</b><br><i>Modelor</i><br><img src="../graphics/xx.gif" alt="" /> <a href="http://forum.nutyx.org/index.php?topic=366.msg1878#msg1878">Re : Recette uClibc-ng (gelée)</a><br><br>
<hr align="center" style="width: 50%;">
<p class="updated">Fri Jun 30 20:44:04 2017 UTC</p><div style="text-transform: uppercase;">Généralitées:</div><b>News</b><br><i>Modelor</i><br><img src="../graphics/xx.gif" alt="" /> <a href="http://forum.nutyx.org/index.php?topic=376.msg1877#msg1877">Re : Nouvelle iso avec mode LIVE disponible</a><br><br>
<hr align="center" style="width: 50%;">
<p class="updated">Thu Jun 29 06:03:45 2017 UTC</p><div style="text-transform: uppercase;">CONFIGURER:</div><b>Le son</b><br><i>tnut</i><br><img src="../graphics/lamp.gif" alt="" /> <a href="http://forum.nutyx.org/index.php?topic=377.msg1876#msg1876">Re : Pas de son, groupe audio absent</a><br><br>
<hr align="center" style="width: 50%;">
<p class="updated">Wed Jun 28 14:51:32 2017 UTC</p><div style="text-transform: uppercase;">CONFIGURER:</div><b>Le son</b><br><i>Rocket</i><br><img src="../graphics/xx.gif" alt="" /> <a href="http://forum.nutyx.org/index.php?topic=377.msg1875#msg1875">Pas de son, groupe audio absent</a><br><br>
<hr align="center" style="width: 50%;">
<p class="updated">Tue Jun 27 14:01:19 2017 UTC</p><div style="text-transform: uppercase;">INSTALLER:</div><b>Un paquet</b><br><i>Rocket</i><br><img src="../graphics/xx.gif" alt="" /> <a href="http://forum.nutyx.org/index.php?topic=362.msg1874#msg1874">Re : Re : Problème de dépendance</a><br><br>
<hr align="center" style="width: 50%;">
<p class="updated">Tue Jun 27 10:57:23 2017 UTC</p><div style="text-transform: uppercase;">INSTALLER:</div><b>Un paquet</b><br><i>tnut</i><br><img src="../graphics/xx.gif" alt="" /> <a href="http://forum.nutyx.org/index.php?topic=362.msg1873#msg1873">Re : Problème de dépendance</a><br><br>
<hr align="center" style="width: 50%;">
<p class="updated">Mon Jun 26 21:04:29 2017 UTC</p><div style="text-transform: uppercase;">INSTALLER:</div><b>Un paquet</b><br><i>Rocket</i><br><img src="../graphics/xx.gif" alt="" /> <a href="http://forum.nutyx.org/index.php?topic=362.msg1872#msg1872">Re : Problème de dépendance</a><br><br>
<hr align="center" style="width: 50%;">
<p class="updated">Mon Jun 26 08:08:47 2017 UTC</p><div style="text-transform: uppercase;">INSTALLER:</div><b>Un paquet</b><br><i>SipoMatadorduCosmos</i><br><img src="../graphics/xx.gif" alt="" /> <a href="http://forum.nutyx.org/index.php?topic=362.msg1871#msg1871">Re : Problème de dépendance</a><br><br>
    </div>
<hr>  <td valign="top" align="left" width="100%">
   <div>
  <form method="get" action="https://www.nutyx.org/fr/.">
     <fieldset>
          <label for="search-field">Recherche ...</label>
          <input id="search-field" type="text" name="search" size="18" maxlength="200" />
     </fieldset>
  </form>
   </div>
    <p class="updated"> Fri Mar 31 14:30:26 2017 UTC</p>
   <h1>Quelles sont les connaissances nécessaires pour contribuer ?</h1>
    <p>
     Pour pouvoir contribuer il ne faut pas être un programmeur averti.
     Quelques notions rudimentaires du langage BASH suffisent.
    <p>
     Si vous n'avez aucune idée du langage BASH, cet article vous expliquera les notions de base pour réaliser une recette sans se prendre la tête.
    <p>
     C'est le langage BASH qui est utilisé pour la rédaction d'une recette et la génération du paquet qui en découle.
     Le fait que BASH soit un langage de programmation peut effrayer plus d'un utilisateur potentiel pensant:
     "Je ne sais pas programmer..."
    <p>
     Cela ne devrait pas être le cas pour trois raisons:
     <ul>
      <li>
       BASH est un langage interprêté et non compilé, c'est à dire que les commandes tapées au clavier (ou lues depuis un fichier) sont directement exécutées sans qu'il ne soit necessaire de construire un programme complet.
      <li>
       La syntaxe de BASH est très simple et intuitive à l'utilisation.
      <li>
       Une recette et la génération du paquet binaire qui en découle utilisent que très rarement des options compliquées du langage BASH.
     </ul>

    <p>
     Alors on y va <img src="../graphics/smiley-wink.gif" alt="Wink" title="Wink" /> pour un petit cours sur la langage de programmation BASH.

    <p>
     Cet article va vous expliquer les quelques notions de base du langage qu'il est bon de savoir si vous souhaitez comprendre la syntaxe d'une recette:
<div class="toc">
 <h2>
Sommaire
</h2>
  <ul style="list-style-type: none; padding: 0;">
<li><a href="#1">Déclaration d'une variable</a>
<li><a href="#2">Utilisation d'une variable</a>
<li><a href="#3">Variables prédéfinies utilisables dans une recette</a>
<li><a href="#4">Déclaration d'un tableau</a>
<li><a href="#5">Déclaration d'une fonction</a>
<li><a href="#6">Conclusion</a>
</ul>
</div>
<a name="1"></a>   <h2>Déclaration d'une variable</h2>
    <p>
     Déclarer une variable se limite à ceci:
     <pre class="command_user"><kbd>name=monpaquet</kbd></pre>
    <p>
     On déclare la variable <b>name</b> en utilisant le signe égal et la valeur de la variable est à droite du signe égal: <b>monpaquet</b>
<a name="2"></a>   <h2>Utilisation d'une variable</h2>
    <p>
     On a appris comment déclarer une variable, c'est bien joli, mais comment fait-on pour l'utiliser, c'est à dire récupérer son contenu ?
    <p>
     Pour pouvoir récupérer le contenu d'une variable on utilise le sigle dollard ($) et éventuellement les accolades. Deux formes sont valides:
     <pre class="command_user"><kbd>${name}
$name</kbd></pre>
    <p>
     Il est recommandé d'utiliser la première forme car si vous utilisez un nom de variable avec des sous-tirets, l'interprétation ne sera pas correcte:
     <pre class="command_user"><kbd>name=xorg-libx11
_name=libX11
$name         # interprétation correcte
${_name}      # interprétation correcte
$_name        # mauvaise interprétation, ne fonctionnera pas</kbd></pre>
    <p>
     Pour voir le résultat de cette commande je vous propose de créer un petit fichier appelé DeclarVar comme suit:
     <pre class="command_user"><kbd>name=kernel
echo "La variable name contient la valeur: ${name}"</kbd></pre>
    <p>
     Lancez maintenant la commande:
    <pre class="command_user" ><kbd>sh DeclareVar</kbd></pre>
    <pre class="output" >La variable name contient la valeur: kernel</pre>
<a name="3"></a>   <h2>Variables prédéfinies utilisables dans une recette</h2>
    <p>
     Lorsque vous construisez une recette vous aurez à votre disposition toute une série de variables prédéfinies.
    <p>
     <b>PKG</b>: Sans doute la plus utilisée, elle définit le dossier de destination des fichiers compilés.
     C'est donc dans ce dossier que se trouve la structure des fichiers prêt à être empaquetés.
    <p>
     <b>SRC</b>: Cette variable définit le dossier où toutes les sources sont extraites.
     Elle est donc aussi très utile lorsqu'il faut parcourir des sous-dossiers et revenir à la fin d'une boucle au dossier de départ, c'est à dire dans le dossier défini par SRC.
     C'est aussi la variable qui définit le dossier courant dans fonction principale de la recette.
    <p>
     <b>MAKEFLAGS</b>: Cette variable n'est pas très souvent utilisée.
     Elle est initialisée dans le fichier de configuration de pkgmk.
     On verra ça en détail dans un autre article, il faut juste savoir pour l'instant qu'elle permet d'influencer la compilation parallèle.
    <p>
     Il en existe d'autres mais personnellement je n'en vois pas l'utilitée dans la construction d'une recette.
<a name="4"></a>   <h2>Déclaration d'un tableau</h2>
    <p>
     Pour déclarer un tableau de chaîne (ou autre) on va ajouter des parenthèses:
     <pre class="output">source=(firefox.png firefox.desktop)</pre>
    <p>
     Le tableau <b>source</b> contient 2 variables: firefox.png et firefox.desktop.
     Si on prend le tableau source de la recette du kernel, on a un joli exemple:
     <pre class="output">source=(http://download.virtualbox.org/virtualbox/${VB_VERSION}/VirtualBox-${VB_VERSION}-${VB_BUILD}-Linux_${VB_ARCH}.run
	http://fr.download.nvidia.com/XFree86/Linux-${_ARCH}/${NVIDIA_VERSION}/NVIDIA-Linux-${_ARCH}-${NVIDIA_VERSION}.run
	http://www.kernel.org/pub/linux/kernel/v3.0/linux-${_BaseVersion}.tar.bz2 config_64 config)</pre>
     <p>
      Chaque ligne est une variable que l'on peut appeler en utilisant la syntaxe:
      <pre class="command_user"><kbd>echo "$(source[1])"</kbd></pre>
     <p>
      Vous noterez que chaque variable peut à son tour contenir d'autres variables pour autant qu'elles soient définies au préalable.
<a name="5"></a>   <h2>Déclaration d'une fonction</h2>
     <p>
      Pour déclarer une fonction, c'est presque aussi simple, on utilise les parenthèses pour spécifier le nom de la fonction, la fonction est toujours délimitée par les accolades <b>{</b> et <b>}</b>.
      Petit exemple:
   <pre class="output">build() {
cd $name-$version
./configure --prefix=/usr
make
make DESTDIR=$PKG install
}</pre>
     <p>
      Comme on peut le voir, c'est bel et bien le contenu d'une recette minimale (sans la déclaration des variables).
      On peut y voir l'utilisation incontournable de la variable <b>PKG</b>.
<a name="6"></a>   <h2>Conclusion</h2>
    <p>
     On peut maintenant découvrir ce qu'est <a href="recept.html">une recette ou un port dans le jargon informatique</a>.
<hr>
    <footer >
     <p id="foot"> Powered by cards 2.2.2.2     &copy; 2007 - 2017 <a href=".html">NuTyX</a>.<br><br>
Hosted by <a href="http://tuxfamily.org/"><img src="../graphics/logo_tuxfamily_50.png"/></a><br><br>
     <a href="http://www.wtfpl.net/">
     <img src="http://www.wtfpl.net/wp-content/uploads/2012/12/wtfpl-badge-4.png"
     width="80" height="15" alt="WTFPL" /></a> 
     <a href="http://www.anybrowser.org/campaign/">
       <img src="../graphics/abblue.gif" width="80" height="15"
       alt="anybrowser"></a>
    </footer>
   </tr>
  </table>
 </body>

<!-- Mirrored from www.nutyx.org/fr/bash-basics by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 02 Jul 2017 10:32:55 GMT -->
</html>
