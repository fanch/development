<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
     "http://www.w3.org/TR/html4/strict.dtd">
<HTML>
   
<!-- Mirrored from www.nutyx.org/fr/build-pass-1 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 02 Jul 2017 10:32:55 GMT -->
<HEAD>
      <TITLE>NuTyX GNU/Linux</TITLE>
      <META charset="utf-8" />
      <LINK rel="shortcut icon" href="../favicon.html">
 <style type="text/css">
 body{
   text-align: left;
   color: #444;
   background: #eee url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAMAAAC6sdbXAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAZQTFRF3d3d////riJKgAAAAAJ0Uk5T/wDltzBKAAAAFUlEQVR42mJgBAEGGMmAxAYCgAADAAGGABmnk/7aAAAAAElFTkSuQmCC); 
   font: 14px;
}
header {
   float: left;
   padding-top: 6px;
   padding-left: 2%;
   margin-right: 2%;
   background-color: #606060;
}
nav { padding-top: 1px; }
/* horizontally center ul element */
nav ul { text-align:center; }
nav li {
    /* make list elements fall inline as block elements */
    position: relative;
    display: inline-block;
    /* next two lines only for display purposes */
    text-align: center;
    border:1px solid black;
}
nav li a {
    font-size:12px;
    text-decoration: none;
    float:left;
    padding:10px;
    background-color: #333333;
    color:#ffffff;
    border-bottom:1px;
    border-bottom-color:#000000;
    border-bottom-style:solid;
}
nav li a:hover {
    background-color:#9B1C26;
    border-bottom-color:#000000;
    border-bottom-style:solid;
}
img { border: 0; }
nav.img { border: 0; }
h1 { text-decoration: underline; }

p1 {
    display: inline-block;
    vertical-align: top;
    text-align: left;
    color:#585858;
    font-size:1em;
}
pre {
   padding: 0.5em 1em;
   margin: 1em 0em 1em 2em;
   font-weight:bold;
   color: black;
   font-family: monospace;
   background-color: #D0D0D0;
}
td { padding: 0.5em 0.5em 0.5em 0.5em; }
tr.header { color: white; background-color: #606060; }
tr.odd { background-color: #D0D0D0; }
.sidebar { background-color: #E0E0E0; }
pre.command { border-left: 0.2em solid #C70000; }
pre.command_user { border-left: 0.2em solid #00C700; }
pre.output { font-weight:normal; }
div.important {
   margin: 1em 2em 1em 2em;
   font-size: 1.2em;
   color:#883333;
   padding: 0.5em 0.5em 0.5em 0.5em;
   border: 2px solid #866;
}
div.note {
   margin: 1em 2em 1em 0em;
   font-size: 1em;
   color:#333388;
   border: 2px solid #dbddec;
   padding: 0.5em 0.5em 0.5em 0.5em;
}
div.toc {
   margin: 0em 0em 0em 0em;
   font-size: 0.9em;
   border: 1px solid #999999;
   padding: 0em 2em 0em 1em;
   width: -moz-max-content;
   background-color: #e9e9ef;
}
div.important img { padding: 0.4em; }
div.note img { padding: 0em 0.4em; }
div.pied_page { text-align: center; }
a { color: #F64825; }
#foot {
    text-align: center;
    text-decoration-color: #000000;
    font-size: 10px;
}
/* Last edited info */
p.updated {
    text-align: left;
    font-size: small;
    font-weight: bold;
    font-style: italic;
}
a:link {
    color: #703030;
    text-decoration: none;
}
a:visited {
    color: #0b0080;
}
a:hover {
    color: #403030;
    text-decoration: underline;
}
table {
    width: 100%;
}
td.menu {
    font: courrier;
    background-color: #959595;
    text-decoration: none;
    vertical-align:middle;
    text-align:center;
    height:60px;
}
td.menu:hover {
    text-decoration: none;
    background-color: #AAAAAA;
    text-transform: uppercase;
}
td.menu a:link {
    font-weight:bold;
    color: black;
    text-decoration: none;
    font-family: arial;
}
td.menu a:visited {
    font-weight:bold;
    color: black;
    text-decoration: none;
    font-family: arial;
}
td.menu a:hover {
    color: black;
    text-decoration: none;
    font-family: arial;
}
 @media print { header, footer {display:none } }
 </style>
</head>
<body>
    <table>
     <tr>
      <td>
       <a href=".html"><img id="logo" src="../graphics/logo_nutyx_120.png" alt="logo nutyx" /></a>
      </td>
      <td>
       <table class="sidebar" >
        <tr>
            <td class="menu"><br><a href="news.html">Nouvelles</a><br><br>
            <td class="menu"><br><a href="information.html">Information</a><br><br>
            <td class="menu"><br><a href="documentation.html">Documentation</a><br><br>
            <td class="menu"><br><a href="installation.html">Installation</a><br><br>
            <td class="menu"><br><a href="packages.html">Paquets</a><br><br>
            <td class="menu"><br><a href="faq.html">FAQ</a><br><br>
        </tr>
        <tr>
            <td class="menu"><br><a href="http://downloads.nutyx.org/?C=M;O=D">Téléchargements</a><br><br>
            <td class="menu"><br><a href="http://forum.nutyx.org/index.php?action=recent">Forum</a><br><br>
            <td class="menu"><br><a href="http://github.com/NuTyX">Code</a><br><br>
            <td class="menu"><br><a href="screenshots.html">Captures d'écrans</a><br><br>
            <td class="menu"><br><a href="wallpapers.html">Fonds d'écrans</a><br><br>
            <td class="menu"><br><a href="../en/index.html" title="Home"> <img src="../graphics/gb.gif" alt="Home" height="12" width="35"></a><br><br>
        </tr>
       </table>
      </td>
     </tr>
    </table>
   <hr>
<table border="0" cellpadding="15" cellspacing="10" width="100%">
 <tr valign="top">
  <td class="sidebar" width="20%">
   <h4>Forum</h4>
    <div>
<p class="updated">Sat Jul  1 17:50:49 2017 UTC</p><div style="text-transform: uppercase;">INSTALLER:</div><b>Un paquet</b><br><i>tnut</i><br><img src="../graphics/xx.gif" alt="" /> <a href="http://forum.nutyx.org/index.php?topic=366.msg1880#msg1880">Re : Recette uClibc-ng (gelée)</a><br><br>
<hr align="center" style="width: 50%;">
<p class="updated">Fri Jun 30 21:42:58 2017 UTC</p><div style="text-transform: uppercase;">INSTALLER:</div><b>Un paquet</b><br><i>Modelor</i><br><img src="../graphics/xx.gif" alt="" /> <a href="http://forum.nutyx.org/index.php?topic=378.msg1879#msg1879">Recette musl-libc</a><br><br>
<hr align="center" style="width: 50%;">
<p class="updated">Fri Jun 30 20:51:32 2017 UTC</p><div style="text-transform: uppercase;">INSTALLER:</div><b>Un paquet</b><br><i>Modelor</i><br><img src="../graphics/xx.gif" alt="" /> <a href="http://forum.nutyx.org/index.php?topic=366.msg1878#msg1878">Re : Recette uClibc-ng (gelée)</a><br><br>
<hr align="center" style="width: 50%;">
<p class="updated">Fri Jun 30 20:44:04 2017 UTC</p><div style="text-transform: uppercase;">Généralitées:</div><b>News</b><br><i>Modelor</i><br><img src="../graphics/xx.gif" alt="" /> <a href="http://forum.nutyx.org/index.php?topic=376.msg1877#msg1877">Re : Nouvelle iso avec mode LIVE disponible</a><br><br>
<hr align="center" style="width: 50%;">
<p class="updated">Thu Jun 29 06:03:45 2017 UTC</p><div style="text-transform: uppercase;">CONFIGURER:</div><b>Le son</b><br><i>tnut</i><br><img src="../graphics/lamp.gif" alt="" /> <a href="http://forum.nutyx.org/index.php?topic=377.msg1876#msg1876">Re : Pas de son, groupe audio absent</a><br><br>
<hr align="center" style="width: 50%;">
<p class="updated">Wed Jun 28 14:51:32 2017 UTC</p><div style="text-transform: uppercase;">CONFIGURER:</div><b>Le son</b><br><i>Rocket</i><br><img src="../graphics/xx.gif" alt="" /> <a href="http://forum.nutyx.org/index.php?topic=377.msg1875#msg1875">Pas de son, groupe audio absent</a><br><br>
<hr align="center" style="width: 50%;">
<p class="updated">Tue Jun 27 14:01:19 2017 UTC</p><div style="text-transform: uppercase;">INSTALLER:</div><b>Un paquet</b><br><i>Rocket</i><br><img src="../graphics/xx.gif" alt="" /> <a href="http://forum.nutyx.org/index.php?topic=362.msg1874#msg1874">Re : Re : Problème de dépendance</a><br><br>
<hr align="center" style="width: 50%;">
<p class="updated">Tue Jun 27 10:57:23 2017 UTC</p><div style="text-transform: uppercase;">INSTALLER:</div><b>Un paquet</b><br><i>tnut</i><br><img src="../graphics/xx.gif" alt="" /> <a href="http://forum.nutyx.org/index.php?topic=362.msg1873#msg1873">Re : Problème de dépendance</a><br><br>
<hr align="center" style="width: 50%;">
<p class="updated">Mon Jun 26 21:04:29 2017 UTC</p><div style="text-transform: uppercase;">INSTALLER:</div><b>Un paquet</b><br><i>Rocket</i><br><img src="../graphics/xx.gif" alt="" /> <a href="http://forum.nutyx.org/index.php?topic=362.msg1872#msg1872">Re : Problème de dépendance</a><br><br>
<hr align="center" style="width: 50%;">
<p class="updated">Mon Jun 26 08:08:47 2017 UTC</p><div style="text-transform: uppercase;">INSTALLER:</div><b>Un paquet</b><br><i>SipoMatadorduCosmos</i><br><img src="../graphics/xx.gif" alt="" /> <a href="http://forum.nutyx.org/index.php?topic=362.msg1871#msg1871">Re : Problème de dépendance</a><br><br>
    </div>
<hr>  <td valign="top" align="left" width="100%">
   <div>
  <form method="get" action="https://www.nutyx.org/fr/.">
     <fieldset>
          <label for="search-field">Recherche ...</label>
          <input id="search-field" type="text" name="search" size="18" maxlength="200" />
     </fieldset>
  </form>
   </div>
    <p class="updated"> Sat Nov  5 13:08:45 2016 UTC</p>
   <h1>Construction de la CHROOT (pass 1)</h1>
    <p>Dans cette première passe nous allons construire un environnement chroot 
    qui sera utilisé pour construire NuTyX dans la passe 2. 
    Si vous avez choisis d'utiliser une partition, pensez à la monter 
    avant d'aller plus loin.</p>
    <p>On va commencer par créér les dossiers, les liens et le compte adéquat 
    pour la construction de la première passe.</p>
    <p>La première partie des préparatifs se fait en compte root et la deuxième 
    partie en compte LFS. Le temps de contruction de la première passe varie 
    entre 1 heure (avec un 8 cores) et une nuit (un mono core ).</p>
    <p>C'est un condensé des choses à faire avant de pouvoir lancer les différents 
    scripts qui feront tout le travail automatiquement.</p>
    <p>Notez que dans cet article, on utilise uniquement un dossier et non 
    une partition. Il est tout à fait possible de construire la CHROOT ds un dossier.</p>
<div class="toc">
 <h2>
Sommaire
</h2>
  <ul style="list-style-type: none; padding: 0;">
<li><a href="#1">Partie Administrateur:</a>
<li><a href="#2">Partie LFS:</a>
</ul>
</div>
<a name="1"></a>    <h2>Partie Administrateur:</h2>
     <ol>
      <li>Création de la variable de configuration LFS:</li>
      <pre class="command"><kbd>export LFS=/mnt/lfs</kbd></pre>
      <li>Création des dossiers:</li>
      <pre class="command"><kbd> mkdir -vp $LFS/{sources,tools}</kbd></pre>
      <li>Ajout des liens necessaires:</li>
      <pre class="command"><kbd>ln -svf $LFS/tools /
ln -svf $LFS/sources /</kbd></pre>
      <li>Création de l'utilisateur lfs:</li>
      <pre class="command"><kbd>groupadd lfs
useradd -s /bin/bash -g lfs -m -k /dev/null lfs
passwd lfs</kbd></pre>
     Vous entrez le mot de passe de votre choix, ce n'est pas indispensable 
     si vous entrez dans le compte lfs depuis root.
      <li>Changement de propriètaire et de mode des dossiers:</li>
      <pre class="command"><kbd>chown -v lfs $LFS/{tools,sources}
chmod -v a+wt $LFS/sources
chown -v lfs $LFS</kbd></pre>
      <li>Ajuster l'envitonnement de travail: le fichier /home/lfs/.bash_profile:</li>
      <pre class="command"><kbd>cat &gt; /home/lfs/.bash_profile &lt;&lt; "EOF"
exec env -i HOME=$HOME TERM=$TERM PS1='\u:\w\$ ' /bin/bash
EOF</kbd></pre>
      
     et le fichier /home/lfs/.bashrc:
     <pre class="command"><kbd>echo "set +h
umask 022
LFS=$LFS
LC_ALL=POSIX
LFS_TARGET=$(uname -m)-lfs-linux-gnu
PATH=/home/lfs/bin:/tools/bin:/bin:/usr/bin
export LFS LC_ALL LFS_TARGET PATH" &gt; /home/lfs/.bashrc</kbd></pre>
    </ol>
     Il est temps de passer à la 2ème partie et donc de se connecter en 
     utilisateur lfs:
     <pre class="command"><kbd>su - lfs</kbd></pre>

<a name="2"></a>     <h2>Partie LFS:</h2>
      <p>A partir de maintenant vous tapez toutes les commandes en compte lfs</p>
      <p>On récupère la dernière version des sources sous git:</p>
     <pre class="command_user"><kbd>git clone git://github.com/NuTyX/core.git development</kbd></pre>
    <p>Une fois terminée, un nouveau dossier a été créé: <b>development</b> On y entre 
    et on lance le premier script:</p>
    <pre class="command_user"><kbd>cd development
scripts/runmebeforepass1</kbd></pre>
    <p>
    Le script va effectuer toute une série de vérifications et si aucune erreur ne s'est produite, le téléchargement des sources commence automatiquement. Une fois le téléchargement terminé, il suffit de suivre les instructions.
    </p>
    <p>
    Si tout s'est bien passé, vous devriez avoir le message:
    </p>
    <pre class="output">====&gt; Successfull configured</pre>
    <p>    
     Si vous lisez ce message, vous êtes prêt pour lancer la première passe 
     pour la construction de votre future NuTyX,faites:
    </p>
    <pre class="command_user"><kbd>cd chroot
pass</kbd></pre>
    <p>
    Admirez le travail ...
    </p>
    <pre class="output">+ mkdir -pv /mnt/lfs/var/lib/pkg
mkdir: created directory '/mnt/lfs/var'
mkdir: created directory '/mnt/lfs/var/lib'
mkdir: created directory '/mnt/lfs/var/lib/pkg'
mkdir: created directory '/mnt/lfs/var/lib/pkg/DB'
=======&gt; Building '/home/lfs/development/chroot/cards/Pkgfile' succeeded.
/home/lfs/development/chroot</pre>
    <p>
    Notez que vous pouvez suivre l'évolution et contrôler la bonne conduite de 
    chaque paquet construit en consultant le dossier /home/lfs/logs/chroot/ . 
    En effet à chaque paquet construit correspond un log.
    </p>
  <div class="pied_page"><a class="url" href="build-pass-2.html">On verra dans un 
  prochain article comment entrer dans la chroot et y construire une NuTyX 
  depuis scratch en utilisant une deuxième fois le même script </a></div>
<hr>
    <footer >
     <p id="foot"> Powered by cards 2.2.2.2     &copy; 2007 - 2017 <a href=".html">NuTyX</a>.<br><br>
Hosted by <a href="http://tuxfamily.org/"><img src="../graphics/logo_tuxfamily_50.png"/></a><br><br>
     <a href="http://www.wtfpl.net/">
     <img src="http://www.wtfpl.net/wp-content/uploads/2012/12/wtfpl-badge-4.png"
     width="80" height="15" alt="WTFPL" /></a> 
     <a href="http://www.anybrowser.org/campaign/">
       <img src="../graphics/abblue.gif" width="80" height="15"
       alt="anybrowser"></a>
    </footer>
   </tr>
  </table>
 </body>

<!-- Mirrored from www.nutyx.org/fr/build-pass-1 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 02 Jul 2017 10:32:55 GMT -->
</html>
