<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
     "http://www.w3.org/TR/html4/strict.dtd">
<HTML>
   
<!-- Mirrored from www.nutyx.org/fr/install-offline by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 02 Jul 2017 10:32:03 GMT -->
<HEAD>
      <TITLE>NuTyX GNU/Linux</TITLE>
      <META charset="utf-8" />
      <LINK rel="shortcut icon" href="../favicon.html">
 <style type="text/css">
 body{
   text-align: left;
   color: #444;
   background: #eee url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAMAAAC6sdbXAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAZQTFRF3d3d////riJKgAAAAAJ0Uk5T/wDltzBKAAAAFUlEQVR42mJgBAEGGMmAxAYCgAADAAGGABmnk/7aAAAAAElFTkSuQmCC); 
   font: 14px;
}
header {
   float: left;
   padding-top: 6px;
   padding-left: 2%;
   margin-right: 2%;
   background-color: #606060;
}
nav { padding-top: 1px; }
/* horizontally center ul element */
nav ul { text-align:center; }
nav li {
    /* make list elements fall inline as block elements */
    position: relative;
    display: inline-block;
    /* next two lines only for display purposes */
    text-align: center;
    border:1px solid black;
}
nav li a {
    font-size:12px;
    text-decoration: none;
    float:left;
    padding:10px;
    background-color: #333333;
    color:#ffffff;
    border-bottom:1px;
    border-bottom-color:#000000;
    border-bottom-style:solid;
}
nav li a:hover {
    background-color:#9B1C26;
    border-bottom-color:#000000;
    border-bottom-style:solid;
}
img { border: 0; }
nav.img { border: 0; }
h1 { text-decoration: underline; }

p1 {
    display: inline-block;
    vertical-align: top;
    text-align: left;
    color:#585858;
    font-size:1em;
}
pre {
   padding: 0.5em 1em;
   margin: 1em 0em 1em 2em;
   font-weight:bold;
   color: black;
   font-family: monospace;
   background-color: #D0D0D0;
}
td { padding: 0.5em 0.5em 0.5em 0.5em; }
tr.header { color: white; background-color: #606060; }
tr.odd { background-color: #D0D0D0; }
.sidebar { background-color: #E0E0E0; }
pre.command { border-left: 0.2em solid #C70000; }
pre.command_user { border-left: 0.2em solid #00C700; }
pre.output { font-weight:normal; }
div.important {
   margin: 1em 2em 1em 2em;
   font-size: 1.2em;
   color:#883333;
   padding: 0.5em 0.5em 0.5em 0.5em;
   border: 2px solid #866;
}
div.note {
   margin: 1em 2em 1em 0em;
   font-size: 1em;
   color:#333388;
   border: 2px solid #dbddec;
   padding: 0.5em 0.5em 0.5em 0.5em;
}
div.toc {
   margin: 0em 0em 0em 0em;
   font-size: 0.9em;
   border: 1px solid #999999;
   padding: 0em 2em 0em 1em;
   width: -moz-max-content;
   background-color: #e9e9ef;
}
div.important img { padding: 0.4em; }
div.note img { padding: 0em 0.4em; }
div.pied_page { text-align: center; }
a { color: #F64825; }
#foot {
    text-align: center;
    text-decoration-color: #000000;
    font-size: 10px;
}
/* Last edited info */
p.updated {
    text-align: left;
    font-size: small;
    font-weight: bold;
    font-style: italic;
}
a:link {
    color: #703030;
    text-decoration: none;
}
a:visited {
    color: #0b0080;
}
a:hover {
    color: #403030;
    text-decoration: underline;
}
table {
    width: 100%;
}
td.menu {
    font: courrier;
    background-color: #959595;
    text-decoration: none;
    vertical-align:middle;
    text-align:center;
    height:60px;
}
td.menu:hover {
    text-decoration: none;
    background-color: #AAAAAA;
    text-transform: uppercase;
}
td.menu a:link {
    font-weight:bold;
    color: black;
    text-decoration: none;
    font-family: arial;
}
td.menu a:visited {
    font-weight:bold;
    color: black;
    text-decoration: none;
    font-family: arial;
}
td.menu a:hover {
    color: black;
    text-decoration: none;
    font-family: arial;
}
 @media print { header, footer {display:none } }
 </style>
</head>
<body>
    <table>
     <tr>
      <td>
       <a href=".html"><img id="logo" src="../graphics/logo_nutyx_120.png" alt="logo nutyx" /></a>
      </td>
      <td>
       <table class="sidebar" >
        <tr>
            <td class="menu"><br><a href="news.html">Nouvelles</a><br><br>
            <td class="menu"><br><a href="information.html">Information</a><br><br>
            <td class="menu"><br><a href="documentation.html">Documentation</a><br><br>
            <td class="menu"><br><a href="installation.html">Installation</a><br><br>
            <td class="menu"><br><a href="packages.html">Paquets</a><br><br>
            <td class="menu"><br><a href="faq.html">FAQ</a><br><br>
        </tr>
        <tr>
            <td class="menu"><br><a href="http://downloads.nutyx.org/?C=M;O=D">Téléchargements</a><br><br>
            <td class="menu"><br><a href="http://forum.nutyx.org/index.php?action=recent">Forum</a><br><br>
            <td class="menu"><br><a href="http://github.com/NuTyX">Code</a><br><br>
            <td class="menu"><br><a href="screenshots.html">Captures d'écrans</a><br><br>
            <td class="menu"><br><a href="wallpapers.html">Fonds d'écrans</a><br><br>
            <td class="menu"><br><a href="../en/index.html" title="Home"> <img src="../graphics/gb.gif" alt="Home" height="12" width="35"></a><br><br>
        </tr>
       </table>
      </td>
     </tr>
    </table>
   <hr>
<table border="0" cellpadding="15" cellspacing="10" width="100%">
 <tr valign="top">
  <td class="sidebar" width="20%">
   <h4>Forum</h4>
    <div>
<p class="updated">Sat Jul  1 17:50:49 2017 UTC</p><div style="text-transform: uppercase;">INSTALLER:</div><b>Un paquet</b><br><i>tnut</i><br><img src="../graphics/xx.gif" alt="" /> <a href="http://forum.nutyx.org/index.php?topic=366.msg1880#msg1880">Re : Recette uClibc-ng (gelée)</a><br><br>
<hr align="center" style="width: 50%;">
<p class="updated">Fri Jun 30 21:42:58 2017 UTC</p><div style="text-transform: uppercase;">INSTALLER:</div><b>Un paquet</b><br><i>Modelor</i><br><img src="../graphics/xx.gif" alt="" /> <a href="http://forum.nutyx.org/index.php?topic=378.msg1879#msg1879">Recette musl-libc</a><br><br>
<hr align="center" style="width: 50%;">
<p class="updated">Fri Jun 30 20:51:32 2017 UTC</p><div style="text-transform: uppercase;">INSTALLER:</div><b>Un paquet</b><br><i>Modelor</i><br><img src="../graphics/xx.gif" alt="" /> <a href="http://forum.nutyx.org/index.php?topic=366.msg1878#msg1878">Re : Recette uClibc-ng (gelée)</a><br><br>
<hr align="center" style="width: 50%;">
<p class="updated">Fri Jun 30 20:44:04 2017 UTC</p><div style="text-transform: uppercase;">Généralitées:</div><b>News</b><br><i>Modelor</i><br><img src="../graphics/xx.gif" alt="" /> <a href="http://forum.nutyx.org/index.php?topic=376.msg1877#msg1877">Re : Nouvelle iso avec mode LIVE disponible</a><br><br>
<hr align="center" style="width: 50%;">
<p class="updated">Thu Jun 29 06:03:45 2017 UTC</p><div style="text-transform: uppercase;">CONFIGURER:</div><b>Le son</b><br><i>tnut</i><br><img src="../graphics/lamp.gif" alt="" /> <a href="http://forum.nutyx.org/index.php?topic=377.msg1876#msg1876">Re : Pas de son, groupe audio absent</a><br><br>
<hr align="center" style="width: 50%;">
<p class="updated">Wed Jun 28 14:51:32 2017 UTC</p><div style="text-transform: uppercase;">CONFIGURER:</div><b>Le son</b><br><i>Rocket</i><br><img src="../graphics/xx.gif" alt="" /> <a href="http://forum.nutyx.org/index.php?topic=377.msg1875#msg1875">Pas de son, groupe audio absent</a><br><br>
<hr align="center" style="width: 50%;">
<p class="updated">Tue Jun 27 14:01:19 2017 UTC</p><div style="text-transform: uppercase;">INSTALLER:</div><b>Un paquet</b><br><i>Rocket</i><br><img src="../graphics/xx.gif" alt="" /> <a href="http://forum.nutyx.org/index.php?topic=362.msg1874#msg1874">Re : Re : Problème de dépendance</a><br><br>
<hr align="center" style="width: 50%;">
<p class="updated">Tue Jun 27 10:57:23 2017 UTC</p><div style="text-transform: uppercase;">INSTALLER:</div><b>Un paquet</b><br><i>tnut</i><br><img src="../graphics/xx.gif" alt="" /> <a href="http://forum.nutyx.org/index.php?topic=362.msg1873#msg1873">Re : Problème de dépendance</a><br><br>
<hr align="center" style="width: 50%;">
<p class="updated">Mon Jun 26 21:04:29 2017 UTC</p><div style="text-transform: uppercase;">INSTALLER:</div><b>Un paquet</b><br><i>Rocket</i><br><img src="../graphics/xx.gif" alt="" /> <a href="http://forum.nutyx.org/index.php?topic=362.msg1872#msg1872">Re : Problème de dépendance</a><br><br>
<hr align="center" style="width: 50%;">
<p class="updated">Mon Jun 26 08:08:47 2017 UTC</p><div style="text-transform: uppercase;">INSTALLER:</div><b>Un paquet</b><br><i>SipoMatadorduCosmos</i><br><img src="../graphics/xx.gif" alt="" /> <a href="http://forum.nutyx.org/index.php?topic=362.msg1871#msg1871">Re : Problème de dépendance</a><br><br>
    </div>
<hr>  <td valign="top" align="left" width="100%">
   <div>
  <form method="get" action="https://www.nutyx.org/fr/.">
     <fieldset>
          <label for="search-field">Recherche ...</label>
          <input id="search-field" type="text" name="search" size="18" maxlength="200" />
     </fieldset>
  </form>
   </div>
    <p class="updated"> Sun Apr 16 13:18:29 2017 UTC</p>
  <h1>Installation de NuTyX via le script sans connection internet</h1>
  

<div class="toc">
 <h2>
Sommaire
</h2>
  <ul style="list-style-type: none; padding: 0;">
<li><a href="#1">Introduction</a>
<li><a href="#2">Mise place de la partition de destination</a>
<li><a href="#3">Récupération des paquets binaires NuTyX base</a>
<li><a href="#4">Récupération du script d'installation depuis le serveur de téléchargement</a>
<li><a href="#5">Mise en place du fichier /etc/install-nutyx.conf.d/cards.conf</a>
<li><a href="#6">Installation de NuTyX</a>
<li><a href="#7">Mise à jour du fichier d'amorçage grub</a>
</ul>
</div>
<a name="1"></a>   <h2>Introduction</h2>
    <div class="note">
     <img alt="[Note]" src="../graphics/note.gif" />
      Dans cet article, la partition de destination sera la <b>/dev/sda4</b>.
    </div>
    <div class="note">
     <img alt="[Note]" src="../graphics/note.gif" />
      L'installation de la procédure d'amorçage n'est pas reprise dans cet article.
      Cela sous-entend que la machine est déjà amorçable et 
      il suffit donc d'ajuster le fichier <b>/boot/grub/grub.cfg</b>
      pour y ajouter une nouvelle entrée <u>NuTyX sur /dev/sda4</u>.
    </div>
    <div class="note">
     <img alt="[Note]" src="../graphics/note.gif" />
      Dans cet article, toutes les commandes doivent s'éffectuer via le compte root.
    </div>
    <div class="important">
     <img alt="[Important]" src="../graphics/caution.gif" />
     <img alt="[Important]" src="../graphics/caution.gif" />
      L'auteur ne peut donc pas être responsable pour les pertes de données
      qui pourrait être le résultat d'une mauvaise manipulation.
      Cet article s'adresse à un public averti.
    </div>
    <p>
    La marche à suivre est:
     <ol>
      <li>
       Mise en place de la partition de destination
      <li>
       Récupération des paquets binaires NuTyX base
      <li>
       Récupération et vérification du script d'installation depuis 
      le serveur de téléchargement.
      <li>
       Mise en place du fichier <b>/etc/install-nutyx.conf.d/cards.conf</b>
      <li>
       Installation de NuTyX
      <li>
       Mise à jour du fichier d'amorçage grub
     </ol>


<a name="2"></a>   <h2>Mise place de la partition de destination</h2>

    <p>
     Dans cet article, la partition de destination sera la <b>/dev/sda4</b>.
     Une taille de 15 Gigabyte minimum permet d'y installer toutes les interfaces graphiques disponible à ce jour:
     <b>xfce4, lxde, gnome, mate et kde5</b> ainsi que d'y garder un jeu complet des binaires.
    <p>
     Le script d'installation effectue toutes ses actions en fonction de la définition de certaines variables.
     La variable la plus importante est:
    <pre class="output">LFS</pre>
    <p>
     Nous allons donc la (re)définir pour que le script puisse s'en servir:
    <pre class="command"><kbd>export LFS=/mnt/NuTyX</kbd></pre>
    <p>
     On formate la partition de destination.
     Le choix du système de fichiers est le <b>ext4</b>
     Ext4 permet de se passer de l'initrd lors du démarrage:
    <pre class="command"><kbd>mkfs.ext4 /dev/sda4</kbd></pre>
    <p>
     On monte la partition formatée sur le dossier défini par la variable LFS.
    <pre class="command"><kbd>mkdir -p $LFS
mount /dev/sda4 $LFS</kbd></pre>
    <p>
     Tout est en place pour récupérer les binaires NuTyX qui serviront à l'installation de NuTyX.


<a name="3"></a>   <h2>Récupération des paquets binaires NuTyX base</h2>

    <p>
     Pour cet opération, nous utilisons la commande <b>rsync</b>.
     Assurez-vous que la commande est installée sur votre distribution.
    <p>
     Une NuTyX de base amorçable necessite uniquement la collection <b>base</b>,
     nous allons donc dans un premier temps télécharger uniquement ces deux collections.
    <p>
     Nous les plaçons directement au bon endroit:
    <pre class="command"><kbd>mkdir -p $LFS/var/lib/pkg/depot
rsync -av --delete rsync://downloads.nutyx.org/nutyx/`uname -m`/9.0/base/ \
$LFS/var/lib/pkg/depot/base/</kbd></pre>
     <p>
      Une fois la commande terminée, on peut maintenant récupérer le script d'installation depuis le serveur.


<a name="4"></a>   <h2>Récupération du script d'installation depuis le serveur de téléchargement</h2>

    <p>
     Pour cet opération, nous utilisons la commande <b>wget</b>.
     Assurez-vous que la commande est installée sur votre distribution.
    <pre class="command"><kbd>wget http://downloads.nutyx.org/install-nutyx{,.md5sum}</kbd></pre>
    <p>
     On vérifie l'intégrité du script avant son utilisation.
    <pre class="command"><kbd>md5sum -c install-nutyx.md5sum</kbd></pre>
    <pre class="output">install-nutyx: OK</pre>
    <p>
     Avant de lancer le script d'installation en y passant les bonnes variables.
     Il reste encore à mettre en place le fichier <b>/etc/install-nutyx.conf.d/cards.conf</b>.


<a name="5"></a>   <h2>Mise en place du fichier /etc/install-nutyx.conf.d/cards.conf</h2>

    <p>
     Le script <b>install-nutyx</b> permet la préconfiguration de nombreux fichiers.
     C'est à dire que si il trouve l'un de ces fichiers dans le dossier <b>/etc/install-nutyx.conf.d/</b>,
     le script se servira du fichier trouvé au lieu de la configuration interne du script.
     Nous allons donc adapter le fichier <b>cards.conf</b> de notre NuTyX pour une installation "offline"
     en y mentionnant la seule collections disponible pour l'installation
    <b>base</b> <u>sans spécifier l'adresse de téléchargement</u>.
    <pre class="command"><kbd>mkdir -p /etc/install-nutyx.conf.d
cat &gt; /etc/install-nutyx.conf.d/cards.conf  &lt;&lt; EOF
dir /var/lib/pkg/depot/base
base /var/lib/pkg/depot/base
locale fr
EOF</kbd></pre>
    <p>
     Nous sommes prêt pour l'installation de NuTyX proprement dite.


<a name="6"></a>   <h2>Installation de NuTyX</h2>

    <p>
     Si vous avez procédé à chaque étape comme expliqué ci-dessus,
     l'installation peut-être lancée via le script téléchargé:
    <pre class="command"><kbd>bash install-nutyx</kbd></pre>
    <p>
     L'installation se fait donc sur la partition <b>/dev/sda4</b>
    montée sur le dossier <b>/mnt/NuTyX</b>.
    <p>
     Aucun téléchargement n'est effectué.
    <pre class="output">....
...
..
****************************************************
      Installation of NuTyX 9.0 installed
      in /mnt/NuTyX sucessfully
****************************************************

****************************************************
* Thanks for installing NuTyX                      *
*                                                  *
* Check http://www.nutyx.org/en/documentation.html *
* or http://www.nutyx.org/fr/documentation.html    *
*                                                  *
* Make sure to review /etc/cards.conf              *
* to meet your requirements in packages selection  *
*                                                  *
****************************************************</pre>


<a name="7"></a>   <h2>Mise à jour du fichier d'amorçage grub</h2>

    <p>
     Mettez à jour votre fichier de configuration <b>/boot/grub/grub.cfg</b>
    en y ajoutant l'entrée:
    <pre class="output">menuentry "NuTyX x86_64 ext4 on /dev/sda4" {
 set root=(hd0,4)
 linux /boot/kernel root=/dev/sda4 ro quiet 
}</pre>
<hr>
    <footer >
     <p id="foot"> Powered by cards 2.2.2.2     &copy; 2007 - 2017 <a href=".html">NuTyX</a>.<br><br>
Hosted by <a href="http://tuxfamily.org/"><img src="../graphics/logo_tuxfamily_50.png"/></a><br><br>
     <a href="http://www.wtfpl.net/">
     <img src="http://www.wtfpl.net/wp-content/uploads/2012/12/wtfpl-badge-4.png"
     width="80" height="15" alt="WTFPL" /></a> 
     <a href="http://www.anybrowser.org/campaign/">
       <img src="../graphics/abblue.gif" width="80" height="15"
       alt="anybrowser"></a>
    </footer>
   </tr>
  </table>
 </body>

<!-- Mirrored from www.nutyx.org/fr/install-offline by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 02 Jul 2017 10:32:04 GMT -->
</html>
