<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
     "http://www.w3.org/TR/html4/strict.dtd">
<HTML>
   
<!-- Mirrored from www.nutyx.org/fr/recept by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 02 Jul 2017 10:32:55 GMT -->
<HEAD>
      <TITLE>NuTyX GNU/Linux</TITLE>
      <META charset="utf-8" />
      <LINK rel="shortcut icon" href="../favicon.html">
 <style type="text/css">
 body{
   text-align: left;
   color: #444;
   background: #eee url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAMAAAC6sdbXAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAZQTFRF3d3d////riJKgAAAAAJ0Uk5T/wDltzBKAAAAFUlEQVR42mJgBAEGGMmAxAYCgAADAAGGABmnk/7aAAAAAElFTkSuQmCC); 
   font: 14px;
}
header {
   float: left;
   padding-top: 6px;
   padding-left: 2%;
   margin-right: 2%;
   background-color: #606060;
}
nav { padding-top: 1px; }
/* horizontally center ul element */
nav ul { text-align:center; }
nav li {
    /* make list elements fall inline as block elements */
    position: relative;
    display: inline-block;
    /* next two lines only for display purposes */
    text-align: center;
    border:1px solid black;
}
nav li a {
    font-size:12px;
    text-decoration: none;
    float:left;
    padding:10px;
    background-color: #333333;
    color:#ffffff;
    border-bottom:1px;
    border-bottom-color:#000000;
    border-bottom-style:solid;
}
nav li a:hover {
    background-color:#9B1C26;
    border-bottom-color:#000000;
    border-bottom-style:solid;
}
img { border: 0; }
nav.img { border: 0; }
h1 { text-decoration: underline; }

p1 {
    display: inline-block;
    vertical-align: top;
    text-align: left;
    color:#585858;
    font-size:1em;
}
pre {
   padding: 0.5em 1em;
   margin: 1em 0em 1em 2em;
   font-weight:bold;
   color: black;
   font-family: monospace;
   background-color: #D0D0D0;
}
td { padding: 0.5em 0.5em 0.5em 0.5em; }
tr.header { color: white; background-color: #606060; }
tr.odd { background-color: #D0D0D0; }
.sidebar { background-color: #E0E0E0; }
pre.command { border-left: 0.2em solid #C70000; }
pre.command_user { border-left: 0.2em solid #00C700; }
pre.output { font-weight:normal; }
div.important {
   margin: 1em 2em 1em 2em;
   font-size: 1.2em;
   color:#883333;
   padding: 0.5em 0.5em 0.5em 0.5em;
   border: 2px solid #866;
}
div.note {
   margin: 1em 2em 1em 0em;
   font-size: 1em;
   color:#333388;
   border: 2px solid #dbddec;
   padding: 0.5em 0.5em 0.5em 0.5em;
}
div.toc {
   margin: 0em 0em 0em 0em;
   font-size: 0.9em;
   border: 1px solid #999999;
   padding: 0em 2em 0em 1em;
   width: -moz-max-content;
   background-color: #e9e9ef;
}
div.important img { padding: 0.4em; }
div.note img { padding: 0em 0.4em; }
div.pied_page { text-align: center; }
a { color: #F64825; }
#foot {
    text-align: center;
    text-decoration-color: #000000;
    font-size: 10px;
}
/* Last edited info */
p.updated {
    text-align: left;
    font-size: small;
    font-weight: bold;
    font-style: italic;
}
a:link {
    color: #703030;
    text-decoration: none;
}
a:visited {
    color: #0b0080;
}
a:hover {
    color: #403030;
    text-decoration: underline;
}
table {
    width: 100%;
}
td.menu {
    font: courrier;
    background-color: #959595;
    text-decoration: none;
    vertical-align:middle;
    text-align:center;
    height:60px;
}
td.menu:hover {
    text-decoration: none;
    background-color: #AAAAAA;
    text-transform: uppercase;
}
td.menu a:link {
    font-weight:bold;
    color: black;
    text-decoration: none;
    font-family: arial;
}
td.menu a:visited {
    font-weight:bold;
    color: black;
    text-decoration: none;
    font-family: arial;
}
td.menu a:hover {
    color: black;
    text-decoration: none;
    font-family: arial;
}
 @media print { header, footer {display:none } }
 </style>
</head>
<body>
    <table>
     <tr>
      <td>
       <a href=".html"><img id="logo" src="../graphics/logo_nutyx_120.png" alt="logo nutyx" /></a>
      </td>
      <td>
       <table class="sidebar" >
        <tr>
            <td class="menu"><br><a href="news.html">Nouvelles</a><br><br>
            <td class="menu"><br><a href="information.html">Information</a><br><br>
            <td class="menu"><br><a href="documentation.html">Documentation</a><br><br>
            <td class="menu"><br><a href="installation.html">Installation</a><br><br>
            <td class="menu"><br><a href="packages.html">Paquets</a><br><br>
            <td class="menu"><br><a href="faq.html">FAQ</a><br><br>
        </tr>
        <tr>
            <td class="menu"><br><a href="http://downloads.nutyx.org/?C=M;O=D">Téléchargements</a><br><br>
            <td class="menu"><br><a href="http://forum.nutyx.org/index.php?action=recent">Forum</a><br><br>
            <td class="menu"><br><a href="http://github.com/NuTyX">Code</a><br><br>
            <td class="menu"><br><a href="screenshots.html">Captures d'écrans</a><br><br>
            <td class="menu"><br><a href="wallpapers.html">Fonds d'écrans</a><br><br>
            <td class="menu"><br><a href="../en/index.html" title="Home"> <img src="../graphics/gb.gif" alt="Home" height="12" width="35"></a><br><br>
        </tr>
       </table>
      </td>
     </tr>
    </table>
   <hr>
<table border="0" cellpadding="15" cellspacing="10" width="100%">
 <tr valign="top">
  <td class="sidebar" width="20%">
   <h4>Forum</h4>
    <div>
<p class="updated">Sat Jul  1 17:50:49 2017 UTC</p><div style="text-transform: uppercase;">INSTALLER:</div><b>Un paquet</b><br><i>tnut</i><br><img src="../graphics/xx.gif" alt="" /> <a href="http://forum.nutyx.org/index.php?topic=366.msg1880#msg1880">Re : Recette uClibc-ng (gelée)</a><br><br>
<hr align="center" style="width: 50%;">
<p class="updated">Fri Jun 30 21:42:58 2017 UTC</p><div style="text-transform: uppercase;">INSTALLER:</div><b>Un paquet</b><br><i>Modelor</i><br><img src="../graphics/xx.gif" alt="" /> <a href="http://forum.nutyx.org/index.php?topic=378.msg1879#msg1879">Recette musl-libc</a><br><br>
<hr align="center" style="width: 50%;">
<p class="updated">Fri Jun 30 20:51:32 2017 UTC</p><div style="text-transform: uppercase;">INSTALLER:</div><b>Un paquet</b><br><i>Modelor</i><br><img src="../graphics/xx.gif" alt="" /> <a href="http://forum.nutyx.org/index.php?topic=366.msg1878#msg1878">Re : Recette uClibc-ng (gelée)</a><br><br>
<hr align="center" style="width: 50%;">
<p class="updated">Fri Jun 30 20:44:04 2017 UTC</p><div style="text-transform: uppercase;">Généralitées:</div><b>News</b><br><i>Modelor</i><br><img src="../graphics/xx.gif" alt="" /> <a href="http://forum.nutyx.org/index.php?topic=376.msg1877#msg1877">Re : Nouvelle iso avec mode LIVE disponible</a><br><br>
<hr align="center" style="width: 50%;">
<p class="updated">Thu Jun 29 06:03:45 2017 UTC</p><div style="text-transform: uppercase;">CONFIGURER:</div><b>Le son</b><br><i>tnut</i><br><img src="../graphics/lamp.gif" alt="" /> <a href="http://forum.nutyx.org/index.php?topic=377.msg1876#msg1876">Re : Pas de son, groupe audio absent</a><br><br>
<hr align="center" style="width: 50%;">
<p class="updated">Wed Jun 28 14:51:32 2017 UTC</p><div style="text-transform: uppercase;">CONFIGURER:</div><b>Le son</b><br><i>Rocket</i><br><img src="../graphics/xx.gif" alt="" /> <a href="http://forum.nutyx.org/index.php?topic=377.msg1875#msg1875">Pas de son, groupe audio absent</a><br><br>
<hr align="center" style="width: 50%;">
<p class="updated">Tue Jun 27 14:01:19 2017 UTC</p><div style="text-transform: uppercase;">INSTALLER:</div><b>Un paquet</b><br><i>Rocket</i><br><img src="../graphics/xx.gif" alt="" /> <a href="http://forum.nutyx.org/index.php?topic=362.msg1874#msg1874">Re : Re : Problème de dépendance</a><br><br>
<hr align="center" style="width: 50%;">
<p class="updated">Tue Jun 27 10:57:23 2017 UTC</p><div style="text-transform: uppercase;">INSTALLER:</div><b>Un paquet</b><br><i>tnut</i><br><img src="../graphics/xx.gif" alt="" /> <a href="http://forum.nutyx.org/index.php?topic=362.msg1873#msg1873">Re : Problème de dépendance</a><br><br>
<hr align="center" style="width: 50%;">
<p class="updated">Mon Jun 26 21:04:29 2017 UTC</p><div style="text-transform: uppercase;">INSTALLER:</div><b>Un paquet</b><br><i>Rocket</i><br><img src="../graphics/xx.gif" alt="" /> <a href="http://forum.nutyx.org/index.php?topic=362.msg1872#msg1872">Re : Problème de dépendance</a><br><br>
<hr align="center" style="width: 50%;">
<p class="updated">Mon Jun 26 08:08:47 2017 UTC</p><div style="text-transform: uppercase;">INSTALLER:</div><b>Un paquet</b><br><i>SipoMatadorduCosmos</i><br><img src="../graphics/xx.gif" alt="" /> <a href="http://forum.nutyx.org/index.php?topic=362.msg1871#msg1871">Re : Problème de dépendance</a><br><br>
    </div>
<hr>  <td valign="top" align="left" width="100%">
   <div>
  <form method="get" action="https://www.nutyx.org/fr/.">
     <fieldset>
          <label for="search-field">Recherche ...</label>
          <input id="search-field" type="text" name="search" size="18" maxlength="200" />
     </fieldset>
  </form>
   </div>
    <p class="updated"> Mon Mar 27 12:51:59 2017 UTC</p>
<h1>Qu'est-ce qu'un port ?</h1>
<div class="toc">
 <h2>
Sommaire
</h2>
  <ul style="list-style-type: none; padding: 0;">
<li><a href="#1">Introduction</a>
<li><a href="#2">Syntaxe minimale d'un port</a>
<li><a href="#3">Exemple pratique d'une recette</a>
<li>
 <ul style="list-style-type: none;"><li><a href="#4">Le fichier xfce4-libutil/Pkgfile</a>
  </ul>
</li><li><a href="#5">Conclusion</a>
</ul>
</div>
<a name="1"></a> <h2>Introduction</h2>
  <p>
   Le port est un dossier contenant un certain nombre de fichiers (au minimum 1)
   nécessaire pour la construction d'un paquet.
   La commande <b>pkgmk</b> permet de "construire" le paquet qui sera ensuite installable.
  <p>
   Pour être fonctionnel, ce dossier doit contenir au minimum un fichier
   appelé <b><span style="color: #007a00;">Pkgfile</span></b>.
   C'est grâce à ce fichier que la construction du paquet peut se faire.
   Le contenu de Pkgfile contient toutes les informations nécessaires
   pour la construction ou plus exactement la compilation du paquet depuis les sources.
  <p>
   Le nom <i>port</i> est emprunté du monde BSD où un port se réfère à un logiciel
   "porté" sur un système d'exploitation ou une plateforme.
   Dans notre cas, le port est simplement la définition de la construction d'un paquet.
<a name="2"></a> <h2>Syntaxe minimale d'un port</h2>
  <p>
   Les informations minimales pour pouvoir produire le binaire sont:
    <ul>
     <li>
      <i><b>name</b></i> spécifie le nom du paquet qui sera construit.
     <li>
      <i><b>version</b></i> spécifie la version des sources du paquet.
     <li>
      <i><b>release</b></i> spécifie la n'ième tentative de construction du paquet. Sa valeur commence donc toujours à <b><i><u>1</u></i></b>
     <li>
      <i><b>source</b></i> contient l'adresse des sources du paquet que l'on souhaite empaqueter.
     <li>
      <i><b>build()</b></i> la fonction qui contient la recette proprement dite.
    </ul>
  <p>
   Un petit exemple avec commentaires:
   <pre class="output"># Nom du paquet
name=gnome-terminal

# Version du paquet
version=2.6.4

# Release du paquet
release=1

# Emplacement des sources du paquet qui sera empaqueté
source=(http://ftp.gnome.org/pub/gnome/sources/$name/${version%.*}/$name-$version.tar.bz2)

# Définition de la recette proprement dite, souvent constitué des trois commandes standards
build() {
cd $name-$version
./configure --prefix=/usr --mandir=/usr/share/man --infodir=/usr/share/info
make
make DESTDIR=$PKG install
}</pre>
   <p>
    Si vous comparez cet exemple avec un port officiel de NuTyX,
    vous constaterez que ce dernier contient plus d'informations.
    C'est ce que nous verrons dans le prochain paragraphe.
    Une ligne vous a peut-être attiré l'attention:
    <pre class="output">http://ftp.gnome.org/pub/gnome/sources/$name/${version%.*}/</pre>
   <p>
    La syntaxe ${version%.*} permet de subsituer une valeur à N chiffres en une valeur à N-1 chiffres.
    C'est très souvent le cas pour les sources des paquets gnome. Dans notre exemple donc, la ligne:
    <pre class="output">http://ftp.gnome.org/pub/gnome/sources/$name/${version%.*}/</pre>
   <p>
    est identique à
    <pre class="output">http://ftp.gnome.org/pub/gnome/sources/$name/2.6/</pre>
   <p>
    puisque la variable <u>version</u>=2.6.4
<a name="3"></a> <h2>Exemple pratique d'une recette</h2>
<a name="4"></a>  <h3>Le fichier xfce4-libutil/Pkgfile</h3>
   <pre class="output"># Depends on: glib intltool

description="libxfce4util, base library for Xfce"
url="http://docs.xfce.org/"
maintainer="git.xfce.org/xfce/xfce4-libutils"
packager="tyrry at nutyx dot org, tnut at nutyx dot org"

_name=libxfce4util

name=xfce4-libutil
version=4.8.2
release=1

source=(http://archive.xfce.org/src/xfce/${_name}/${version%.*}/${_name}-$version.tar.bz2)

build() {
cd ${_name}-$version
./configure --prefix=/usr \
--disable-static
make
make DESTDIR=$PKG install
}</pre>
   <p>
    Si vous souhaitez que le serveur de construction puisse construire le paquet sans soucis,
    il est important de mentioner toutes les dépendances necessaires à la compilation de votre paquet,
    et ce en partant toujours d'une NuTyX de base.
    En effet le serveur construira toujours le paquet en partant de la même base.
   <p>
    La ligne <b># Depends on:</b> est utilisée à cet effet,
    elle définie donc les dépendances necessaire à la <u>compilation</u> du paquet.
    On y indique une dépendance séparée par un espace, une virgule
    ou les deux.<img src="../graphics/smiley-laughing.gif" alt="Laughing" title="Laughing" />.
    
<a name="5"></a> <h2>Conclusion</h2>
 <p>
  Vous pouvez maintenant essayer de contruire <a href="build-package.html">votre premier paquet</a>
<hr>
    <footer >
     <p id="foot"> Powered by cards 2.2.2.2     &copy; 2007 - 2017 <a href=".html">NuTyX</a>.<br><br>
Hosted by <a href="http://tuxfamily.org/"><img src="../graphics/logo_tuxfamily_50.png"/></a><br><br>
     <a href="http://www.wtfpl.net/">
     <img src="http://www.wtfpl.net/wp-content/uploads/2012/12/wtfpl-badge-4.png"
     width="80" height="15" alt="WTFPL" /></a> 
     <a href="http://www.anybrowser.org/campaign/">
       <img src="../graphics/abblue.gif" width="80" height="15"
       alt="anybrowser"></a>
    </footer>
   </tr>
  </table>
 </body>

<!-- Mirrored from www.nutyx.org/fr/recept by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 02 Jul 2017 10:32:55 GMT -->
</html>
